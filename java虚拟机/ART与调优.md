**Dalvik&Art虚拟机&Hotspot虚拟机区别**

栈的区别

- 比JVM少了操作数栈的概念，而采用了寄存器的多地址操作

堆区区别

- 

Dalvik&Hotspot

- 基于堆栈的Java指令(1个字节)和基于寄存器的Dalvik指令(2、4或者6个字节)各有优劣 

- 一般而言，执行同样的功能， Java虚拟机需要更多的指令(主要是load和store指令)，而Dalvik虚拟机需 要更多的指令空间 

- 需要更多指令意味着要多占用CPU时间，而需要更多指令空间意味着指令缓冲(i-cache)更易失效 

- Dalvik虚拟机使用dex(Dalvik Executable)格式的类文件，而Java虚拟机使用class格式的类文件 

- 一个dex文件可以包含若干个类，而一个class文件只包括一个类 

- 由于一个dex文件可以包含若干个类，因此它可以将各个类中重复的字符串只保存一次，从而节省了空间， 适合在内存有限的移动设备使用
-  一般来说，包含有相同类的未压缩dex文件稍小于一个已经压缩的jar文件



Art&Dalvik

Dalvik虚拟机执行的是dex字节码，解释执行。从Android 2.2版本开始，支持 在程序运行的过程中进行选择热点代码(经常执行的代码)进行编译或者优化。

而ART(Android Runtime) 是在 Android 4.4 中引入的一个开发者选项，也是 Android 5.0 及更高版本的默 认 Android 运行时。ART虚拟机执行的是本地机器码。Android的运行时从Dalvik虚拟机替换成ART虚拟机， 并不要求开发者将自己的应用直接编译成目标机器码，APK仍然是一个包含dex字节码的文件。





解决两个问题：

内存泄漏

内存抖动